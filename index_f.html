<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã®ã©ãã‚å›ã®æ°´æ§½ã‚²ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="camera.css">
    <style>
        /* ç”»é¢å‘ããƒ­ãƒƒã‚¯ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        #orientation-lock-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        #orientation-lock-overlay.show {
            display: flex;
        }

        .orientation-lock-content {
            text-align: center;
            color: white;
        }

        .orientation-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: rotate-phone 2s ease-in-out infinite;
        }

        .orientation-message {
            font-size: 24px;
            font-weight: bold;
            line-height: 1.5;
        }

        @keyframes rotate-phone {
            0%, 100% {
                transform: rotate(0deg);
            }
            25% {
                transform: rotate(-15deg);
            }
            75% {
                transform: rotate(15deg);
            }
        }
    </style>
</head>
<body>
    <!-- ç”»é¢å‘ããƒ­ãƒƒã‚¯ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div id="orientation-lock-overlay">
        <div class="orientation-lock-content">
            <div class="orientation-icon">ğŸ“±â†»</div>
            <div class="orientation-message">
                ã‚¹ãƒãƒ›ã®å‘ãã‚’æ¨ªå‘ãã«ã—ã¦ä¸‹ã•ã„
            </div>
        </div>
    </div>
    <div class="game-container">
        <div class="aquarium">
            <div class="bubbles" id="bubbles"></div>
            <div class="fish-container" id="fish-container">
                <div class="fish" id="fish">
                    <img src="left_nodo.png" alt="ã®ã©ãã‚å›" id="fish-image">
                </div>
            </div>
            <div class="countdown" id="countdown">
                <p>ã®ã©ãã‚å›ç™»å ´ã¾ã§: <span id="countdown-timer">10</span>ç§’</p>
            </div>
            <div class="suffering-message" id="suffering-message">
                <p>ã®ã©ãã‚å›ã‚’åŠ©ã‘ã¦ï¼</p>
            </div>
            
            <!-- ã‚«ãƒ¡ãƒ©æ˜ åƒè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆæ°´æ§½å†…å³ä¸Šï¼‰ -->
            <div class="camera-section">
                <div class="camera-container">
                    <video id="camera-video" autoplay muted playsinline></video>
                    <div class="camera-overlay">
                        <p>ã‚«ãƒ¡ãƒ©ã‚’é–‹å§‹</p>
                    </div>
                </div>
            </div>
        </div>

    </div>
    
    <!-- éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ« -->
    <audio id="bubbling-sound" preload="auto" loop>
        <source src="oyogenodogurokun.mp3" type="audio/mpeg">
        ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°å†ç”Ÿã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
    </audio>
    
    <script src="script.js"></script>
    <script src="camera.js"></script>

    <script>
        // ç”»é¢å‘ããƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
        const orientationOverlay = document.getElementById('orientation-lock-overlay');
        const gameContainer = document.querySelector('.game-container');

        function checkOrientation() {
            const width = window.innerWidth;
            const height = window.innerHeight;

            // ç¸¦å‘ãï¼ˆç¸¦å¹… > æ¨ªå¹…ï¼‰ã®å ´åˆ
            if (height > width) {
                orientationOverlay.classList.add('show');
                // ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ãƒŠã®æ“ä½œã‚’ç„¡åŠ¹åŒ–
                if (gameContainer) {
                    gameContainer.style.pointerEvents = 'none';
                }
            } else {
                // æ¨ªå‘ãã®å ´åˆ
                orientationOverlay.classList.remove('show');
                // ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ãƒŠã®æ“ä½œã‚’æœ‰åŠ¹åŒ–
                if (gameContainer) {
                    gameContainer.style.pointerEvents = 'auto';
                }
            }
        }

        // åˆæœŸãƒã‚§ãƒƒã‚¯
        checkOrientation();

        // ç”»é¢ã‚µã‚¤ã‚ºå¤‰æ›´æ™‚ã¨ãƒ‡ãƒã‚¤ã‚¹å‘ãå¤‰æ›´æ™‚ã«ãƒã‚§ãƒƒã‚¯
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', checkOrientation);
    </script>
</body>
</html>
